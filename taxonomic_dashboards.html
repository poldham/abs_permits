<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Paul Oldham" />


<title>Creating a Dashboard of Taxonomic Information</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */


</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<div class="container-fluid main-container">

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->





<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">About</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    The Model
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="executive_summary.html">Executive Summary</a>
    </li>
    <li>
      <a href="1_background.html">Background</a>
    </li>
    <li>
      <a href="2_the_model.html">The Model</a>
    </li>
    <li>
      <a href="3_principles.html">Core Principles</a>
    </li>
    <li>
      <a href="4_unique_identifiers.html">Unique Identifiers</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Planning
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="5_workplan.html">Draft Workplan</a>
    </li>
    <li>
      <a href="annex.html">Annex</a>
    </li>
  </ul>
</li>
<li>
  <a href="presentations/schematics/index.html">Schematics</a>
</li>
<li>
  <a href="resources.html">Publications</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Resources for Developers
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="kenya.html">Kenya Prototype</a>
    </li>
    <li>
      <a href="researcher_identifiers.html">Researcher Identifiers</a>
    </li>
    <li>
      <a href="literature.html">Scientific Literature</a>
    </li>
    <li>
      <a href="geographic.html">Geographic</a>
    </li>
    <li>
      <a href="patent.html">Patent Data</a>
    </li>
    <li>
      <a href="taxonomy.html">Taxonomy</a>
    </li>
    <li>
      <a href="taxonomic_dashboards.html">Taxonomic Dashboards</a>
    </li>
    <li>
      <a href="mdm.html">Master Data Management</a>
    </li>
    <li>
      <a href="dictionary.html">Data Dictionary</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://poldham.github.io/abs/index.html">ABS Monitoring Handbook</a>
</li>
<li>
  <a href="https://www.pauloldham.net/">The Blog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Creating a Dashboard of Taxonomic Information</h1>
<h4 class="author"><em>Paul Oldham</em></h4>
<h4 class="date"><em>25/09/2018</em></h4>

</div>


<p>This article documents the process for creating an interactive taxonomic dashboard and options for linking a taxonomic dashboard with other data components.</p>
<p>The process basically consists of taking a dataset of taxonomic information about a country and linking it dynamically with other information such as publications, patent data, DNA sequences, images or web searches.</p>
<p>A dashboard can use three sources of data:</p>
<ol style="list-style-type: lower-alpha">
<li>Data from a backend database</li>
<li>Make a call and ingest data from an API (responsiveness issue)</li>
<li>A simple web link that opens the results in a pane in the same page. Or a new tab (target=&quot;_blank&quot;). Link break issue</li>
</ol>
<p>A dashboard offers a summary of data that a user can interact with to answer questions. This is normally facilitated using a set of filters of various kinds. For example, filtering the data by kingdom to show only plants.</p>
<p>In order to address specific issues a set of dashboards will normally be needed presenting specific views of the data for exploration. For ABS Monitoring under the Nagoya Protocol this will normally involve</p>
<ol style="list-style-type: lower-alpha">
<li>Taxonomy dashboard</li>
</ol>
<p>Use case: An applicant wants to collect particular species in a region in India. The desk officer wants to rapidly know:</p>
<ol style="list-style-type: lower-alpha">
<li>where this species is known to be located in India,</li>
<li>whether it has been the subject of earlier research</li>
<li>What the conservation status of the species is</li>
<li>Whether the research is proposed to take place in a protected area or not</li>
<li>Whether the species is linked with traditional knowledge</li>
<li>Whether there is existing commercial research and development revealed in patent data (as an indicator of potential or actual commercial interest)</li>
<li>Whether thete is genetic sequence data for the species or a DNA bar code</li>
</ol>
<div id="a-taxonomic-dash" class="section level3">
<h3>A Taxonomic Dash</h3>
<p>An example of a taxonomy dashboard is presented below using 6 million species occurrence records from India. The example is built in Tableau because it is easy to use to create mock ups. However, dashboards can be built with a range of other tools such as Javascript …notably see D3, Flexdashboards in R and others.</p>
<p>The dashboard can be visited <a href="https://public.tableau.com/profile/poldham#!/vizhome/india_gbif/TaxonomyDashboard?publish=yes">here</a></p>
<p>Note that the embedded dashboard below will display in a slightly crunched form inside a web page</p>
<p>In this view the focus is on presenting a summary of the data on a species and providing hyperlinks from the species names and the dots (showing the coordinates for the known occurrence of the species.</p>
<p>The existing links are to:</p>
<ol style="list-style-type: lower-alpha">
<li>scientific literature (crossref and core.ac.uk)</li>
<li>patent literature (using the Lens database)</li>
<li>Google Search for the species including traditional knowledge</li>
<li>Google Search including the word India</li>
<li>A lookup on GenBank for DNA sequence records (just for the species)</li>
</ol>
<p>This approach focuses on triggering external links. An alternative approach is to embed a blank web page and trigger the response into that web page. An example of this is this page from the same Tableau workbook under Embedded Web Page.</p>
<p>Note that in Tableau this does not work particularly well in the public online version. It does work in the workbook in the desktop version of Tableau. In some cases nothing is displayed.</p>
<p>To see results experiments with</p>
<ul>
<li>Lookup in Patent Title Abstract or Claims</li>
<li>Lookup in Patent</li>
<li>Lookup Genbank</li>
</ul>
<p>This gives an idea of the possiblity of triggering lookups from a species list (or a person list) to assist a desk officer with assessing applications.</p>
</div>
<div id="map-layer-options" class="section level3">
<h3>Map Layer Options</h3>
<p>It would in future be desirable to add a map layer showing protected areas (national parks) to this kind of visualisation</p>
</div>
<div id="conservation-status" class="section level2">
<h2>Conservation Status</h2>
<p>The IUCN Red List provides information on the conservation status of species. However, it is not so easy to construct hyperlinks to the Red List and this would need to be done by passing the species to the Red List API service to retrieve the Red List Identifiers</p>
<div id="a-note-on-the-taxonomic-data" class="section level3">
<h3>A note on the taxonomic data</h3>
<p>The raw data for these views comes from GBIF for India with 6 million occurrence (observation) records [insert DOI].</p>
<p>The main information from this table that will typically be of interest (for finding out about the species) is</p>
<ul>
<li>kingdom</li>
<li>phylum</li>
<li>class</li>
<li>order</li>
<li>family</li>
<li>genus</li>
<li>species</li>
<li>scientific name</li>
<li>decimal latitude</li>
<li>decimal longitude</li>
</ul>
<p>Additional information of interest is</p>
<ul>
<li>Locality</li>
<li>Issues (which refer to issues with the observation data itself and mainly of interest for data preparation)</li>
</ul>
<p>Important Keyas are</p>
<ul>
<li>gbifid (which relates in this data to the occurrence record)</li>
<li>taxonkey</li>
<li>specieskey</li>
</ul>
<p>The specieskey (which is often but not always the same as the taxonkey) is used in the GBIF API and database for lookup. In the raw data (not shown here) the first row in the gbif data is for Threskiornis melanocephalus or the Black headed Ibis. We can select the records on the species key,</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">india_raw <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(specieskey <span class="op">==</span><span class="st"> &quot;2480767&quot;</span>)</a></code></pre></div>
<p>That would give us 25,114 observations of this species in India.</p>
<p>If we wanted to link out to the GBIF database or retrieve more data using the GBIF API then we would use the specieskey.</p>
<p>On the public website that would be here: <a href="https://www.gbif.org/species/2480767" class="uri">https://www.gbif.org/species/2480767</a></p>
<p>Note that the species key is simply added to the end of the URL and leads to this page.</p>
<p>When working with GBIF data (as discussed in detail <a href="https://poldham.github.io/abs/gbif.html">here</a>) note that many of the observation records will be for birds. Bird data will often flood the dataset.</p>
<p>Other searches of taxonomic data sources can be added such as</p>
<p>The encyclopedia of life</p>
<p><a href="http://eol.org/search/q=Threskiornis%20melanocephalus">http://eol.org/search/q=Threskiornis%20melanocephalus</a></p>
<p>The Biodiversity Heritage Library (for older digitised texts)</p>
<p><a href="http://www.biodiversitylibrary.org/name/Threskiornis_melanocephalus" class="uri">http://www.biodiversitylibrary.org/name/Threskiornis_melanocephalus</a></p>
<p>Note that creating these links requires attention to the specific URL structures for the external sources.</p>
</div>
<div id="summarising-the-data" class="section level3">
<h3>Summarising the Data</h3>
<p>For summaries of the data as above note that a combination will be needed of count and count distinct. Thus count would be used to count up the occurrences associated with a species. Count distinct would be used to count up the number of species in a kingdom for this data. It is important to check the counts to avoid unexpected results.</p>
</div>
</div>
<div id="combining-dashboards" class="section level2">
<h2>Combining Dashboards</h2>
<p>When datasets are available from the scientific literature or the patent literature it is possible to construct dashboards that combine the different data sources, Thus, in reviewing an application for an ABS permit or in reviewing the outputs of research we might want to look</p>
</div>
<div id="the-dashboard-example" class="section level2">
<h2>The Dashboard Example</h2>
<iframe align = "center" width = "1200" height = "1000" src="https://public.tableau.com/profile/poldham#!/vizhome/india_gbif/TaxonomyDashboard?publish=yes"/>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
